PROJECT_ROOT=$(git rev-parse --show-toplevel)

conda activate silkjam

dc() {
    docker compose -f docker/docker-compose.yml $@
}

install() {
    export DEBUG=false
    export DATA_VOLUME=data
    dc stop silkjam
    dc build
    dc --env-file env/.env up -d
}

run() {
    export DATA_VOLUME="$PROJECT_ROOT/data"
    if [ "$1" = "--debug" ]; then
        export DEBUG=true
    else
        export DEBUG=false
    fi
    dc stop silkjam
    dc build
    dc --env-file env/.env up -d
}

stop() {
    dc stop silkjam
}