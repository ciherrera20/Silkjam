PROJECT_ROOT=$(git rev-parse --show-toplevel)

conda activate silkjam

dc() {
    docker compose -f docker/docker-compose.yml $@
}

install() {
    DEBUG=false
    DATA_VOLUME=data
    dc stop silkjam
    dc build
    dc --env-file env/.env up -d
}

run() {
    DATA_VOLUME="$PROJECT_ROOT/app/data"
    if [ "$1" = "--debug" ]; then
        DEBUG=true
    else
        DEBUG=false
    fi
    dc stop silkjam
    dc build
    dc --env-file env/.env up -d
}

stop() {
    dc stop silkjam
}